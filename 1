#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>

#define MAX_MSG_SIZE 256

struct msg_buffer {
long msg_type;
char msg_text[MAX_MSG_SIZE];
};

int main() {
int msgid;
key_t key;
struct msg_buffer msg;


key = ftok("/tmp", 65);

// Получаем доступ к очереди сообщений
msgid = msgget(key, 0666 | IPC_CREAT);

// Отправляем сообщения серверу
int num_clients = 5; // Задайте количество клиентов

for (int i = 0; i < num_clients; i++) {
time_t t = time(NULL);
snprintf(msg.msg_text, sizeof(msg.msg_text), "Client %d: Current time is %s", i, ctime(&t));
msg.msg_type = 1;

msgsnd(msgid, &msg, sizeof(msg), 0);

sleep(5);
}

return 0;
}
